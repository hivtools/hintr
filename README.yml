- comment: Test that container is working by using
  command: http://localhost:8888

- comment: Validate PJNZ
  command: |
    -X POST -H 'Content-Type: application/json' \
    http://localhost:8888/validate/baseline-individual
  data: hintr:::setup_payload_validate_pjnz(testthat::test_path("testdata"))

- comment: Validate shape file and return serialised data
  command: |
    -X POST -H 'Content-Type: application/json' \
    http://localhost:8888/validate/baseline-individual
  data: hintr:::setup_payload_validate_shape(testthat::test_path("testdata"))

- comment: Validate population data
  command: |
    -X POST -H 'Content-Type: application/json' \
    http://localhost:8888/validate/baseline-individual
  data: hintr:::setup_payload_validate_population(testthat::test_path("testdata"))

- comment: Validate baseline data
  command: |
    -X POST -H 'Content-Type: application/json' \
    http://localhost:8888/validate/baseline-combined
  data: hintr:::setup_payload_validate_baseline(testthat::test_path("testdata"))

- comment: Validate programme ART data
  command: |
    -X POST -H 'Content-Type: application/json' \
    http://localhost:8888/validate/survey-and-programme
  data: hintr:::setup_payload_validate_programme(testthat::test_path("testdata"))

- comment: Validate ANC data
  command: |
    -X POST -H 'Content-Type: application/json' \
    http://localhost:8888/validate/survey-and-programme
  data: hintr:::setup_payload_validate_anc(testthat::test_path("testdata"))

- comment: Validate survey data
  command: |
    -X POST -H 'Content-Type: application/json' \
    http://localhost:8888/validate/survey-and-programme
  data: hintr:::setup_payload_validate_survey(testthat::test_path("testdata"))

- comment: Get model run options
  command: |
    -X POST -H 'Content-Type: application/json' \
    http://localhost:8888/model/options
  data: hintr:::setup_payload_model_options(testthat::test_path("testdata"))

- comment: Run a model
  command: |
    -X POST -H 'Content-Type: application/json' \
    http://localhost:8888/model/submit
  data: hintr:::setup_payload_submit(testthat::test_path("testdata"))
  collect:
    model_id: ["id"]

- comment: Query status of model run
  command: http://localhost:8888/model/status/{model_id}
  sleep: 8

- comment: Get the result of a model run
  command: http://localhost:8888/model/result/{model_id}

- comment: Calibrate a model
  command: |
   -X POST -H 'Content-Type: application/json' \
   http://localhost:8888/calibrate/submit/{model_id}
  data: hintr:::setup_payload_calibrate()
  collect:
    calibrate_id: ["id"]

- comment: Query status of calibrate run
  command: http://localhost:8888/calibrate/status/{calibrate_id}
  sleep: 30

- comment: Get the result of a calibrate run
  command: http://localhost:8888/calibrate/result/{calibrate_id}

- comment: Initialise download generation, type spectrum, coarse_output, summary or comparison
  command: |
   -X POST -H 'Content-Type: application/json' \
   http://localhost:8888/download/submit/spectrum/{calibrate_id}
  data: hintr:::setup_payload_download_request()
  collect:
    download_id: ["id"]

- comment: Query status of download generation
  command: http://localhost:8888/download/status/{download_id}
  sleep: 20

- comment: Headers for summary download result
  command: -I http://localhost:8888/download/result/{download_id}
  format: header

- comment: Get the summary download result
  command: http://localhost:8888/download/result/{download_id}
  format: bytes

- comment: Get plotting metadata for Malawi
  command: http://localhost:8888/meta/plotting/Malawi

- comment: Get information about hintr versions
  command: http://localhost:8888/hintr/version

- comment: Get information about hintr's workers
  command: http://localhost:8888/hintr/worker/status
