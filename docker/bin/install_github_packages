#!/usr/bin/env Rscript
'Usage:
install_github_packages <package>...' -> usage
opts <- docopt::docopt(usage)

packages <- opts$package

install.packages("devtools")
devtools::install_github(packages)

pkg_names <- lapply(packages, function(x) {
	split <- strsplit(x, "/")
	split[[1]][length(split[[1]])]
})
msg <- setdiff(pkg_names, .packages(TRUE))
if (length(msg) > 0L) {
  stop("Failed to install: ", paste(msg, collapse = ", "))
}
